---
// src/components/blocks/HeroV20.astro - Payload CMS Compatible (Social Media Agency) - FINAL HERO!

export interface Props {
  badge: string;
  heading: {
    headingPart1: string;
    italicHeading: string;
    headingPart2: string;
  };
  sliderImages: Array<{
    image: {
      url: string;
      alt?: string;
    };
    alt: string;
  }>;
  description: string;
  button: {
    text: string;
    url: string;
  };
  gradientBackground: {
    url: string;
    alt?: string;
  };
}

const {
  badge,
  heading,
  sliderImages,
  description,
  button,
  gradientBackground,
} = Astro.props;

// Helper function to ensure proper image URLs
const getImageUrl = (imageObj: { url: string; alt?: string }) => {
  return imageObj?.url?.startsWith('http') 
    ? imageObj.url 
    : `http://localhost:3000${imageObj?.url || ''}`;
};

// Prepare image URLs
const gradientBackgroundUrl = getImageUrl(gradientBackground);
const sliderImagesList = sliderImages || [];
---

<section
  class="pt-28 md:pt-[180px] lg:pt-[200px] pb-14 md:pb-[90px] lg:pb-[112px] relative overflow-hidden"
  aria-labelledby="hero-heading"
>
  <!-- Gradient Background Effect -->
  <div
    id="hero-gradient-wrapper"
    class="absolute w-full h-fw-full top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 -z-10 blur-[60px] scale-90"
    aria-hidden="true"
  >
    <img
      src={gradientBackgroundUrl}
      alt={gradientBackground?.alt || "gradient background"}
      id="hero-gradient"
      class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"
      width="1200"
      height="800"
      loading="lazy"
    />
  </div>

  <!-- Hero Content -->
  <div class="container reveal-me text-center">
    <!-- Hero Badge -->
    <div class="rv-badge mb-3 reveal-me">
      <span class="rv-badge-text">{badge}</span>
    </div>

    <!-- Hero Heading -->
    <h1 id="hero-heading" class="xl:leading-[1.1]">
      {heading.headingPart1} <i class="font-instrument">{heading.italicHeading}</i>
      <span
        class="cta-slider-container max-sm:block sm:inline-block max-sm:mb-5 translate-y-2 sm:translate-y-[20px] max-sm:mt-2.5"
        aria-label="Carousel of social media examples"
      >
        <div class="cta-inline-slider">
          {sliderImagesList.map((item, index) => (
            <div class="slide">
              <img 
                src={getImageUrl(item.image)} 
                alt={item.alt || item.image?.alt || `Social media example ${index + 1}`}
                width="120" 
                height="80"
                loading="lazy"
              />
            </div>
          ))}
        </div>
      </span>
      {heading.headingPart2}
    </h1>

    <p class="md:max-w-[670px] mt-3 mx-auto text-center">
      {description}
    </p>

    <!-- CTA Buttons -->
    <div class="flex justify-center mt-8 md:mt-14">
      <a
        href={button.url}
        class="rv-button rv-button-sm rv-button-primary block md:inline-block w-full text-center md:w-auto"
        aria-label="Schedule your free consultation call"
      >
        <div class="rv-button-top">
          <span>{button.text}</span>
        </div>
        <div class="rv-button-bottom">
          <span class="text-nowrap">{button.text}</span>
        </div>
      </a>
    </div>
  </div>
</section>