---
// src/components/blocks/HeroV8.astro - Payload CMS Compatible (Full Screen)

export interface Props {
  backgroundImages: {
    bgImage1: {
      url: string;
      alt?: string;
    };
    bgImage2: {
      url: string;
      alt?: string;
    };
    bgImage3: {
      url: string;
      alt?: string;
    };
    bgImage4: {
      url: string;
      alt?: string;
    };
  };
  gradientBg: {
    url: string;
    alt?: string;
  };
  mainTitle: string;
  subtitle: string;
  button: {
    text: string;
    url: string;
  };
}

const {
  backgroundImages,
  gradientBg,
  mainTitle,
  subtitle,
  button,
} = Astro.props;

// Helper function to ensure proper image URLs
const getImageUrl = (imageObj: { url: string; alt?: string }) => {
  return imageObj?.url?.startsWith('http') 
    ? imageObj.url 
    : `http://localhost:3000${imageObj?.url || ''}`;
};

// Prepare all image URLs
const bgImage1Url = getImageUrl(backgroundImages.bgImage1);
const bgImage2Url = getImageUrl(backgroundImages.bgImage2);
const bgImage3Url = getImageUrl(backgroundImages.bgImage3);
const bgImage4Url = getImageUrl(backgroundImages.bgImage4);
const gradientBgUrl = getImageUrl(gradientBg);
---

<section
  class="relative z-20 w-full max-sm:pt-32 max-2xl:pt-40 2xl:min-h-screen flex items-center justify-center overflow-hidden"
>
  <!-- Background Images -->
  <figure class="absolute top-0 left-0 hidden 2xl:block" id="hero-1">
    <img
      src={bgImage1Url}
      alt={backgroundImages.bgImage1?.alt || "Abstract Top Left"}
      class="w-full h-full object-cover"
      loading="lazy"
    />
  </figure>
  <figure class="absolute top-0 right-0 hidden 2xl:block" id="hero-2">
    <img
      src={bgImage2Url}
      alt={backgroundImages.bgImage2?.alt || "Abstract Top Right"}
      class="w-full h-full object-cover"
      loading="lazy"
    />
  </figure>
  <figure class="absolute bottom-0 left-0 hidden 2xl:block" id="hero-3">
    <img
      src={bgImage3Url}
      alt={backgroundImages.bgImage3?.alt || "Abstract Bottom Left"}
      class="w-full h-full object-cover"
      loading="lazy"
    />
  </figure>
  <figure class="absolute bottom-0 right-0 hidden 2xl:block" id="hero-4">
    <img
      src={bgImage4Url}
      alt={backgroundImages.bgImage4?.alt || "Abstract Bottom Right"}
      class="w-full h-full object-cover"
      loading="lazy"
    />
  </figure>

  <div
    id="hero-gradient-wrapper"
    class="absolute w-full h-full top-0 left-0 -z-10 blur-[35px] md:blur-[60px] block 2xl:hidden scale-90"
  >
    <img
      src={gradientBgUrl}
      alt={gradientBg?.alt || "hero-gradient-background"}
      id="hero-gradient"
      class="absolute left-1/2 top-1/2 -translate-x-1/2 max-md:-translate-y-1/2 md:-translate-y-1/2"
      loading="lazy"
    />
  </div>

  <!-- Content -->
  <div class="relative text-center z-10 px-4 reveal-me">
    <h1
      class="text-7xl sm:text-8xl md:text-[255px] lg:text-[338px] font-medium lg:leading-[338px] lg:tracking-[-10.14px] uppercase"
    >
      {mainTitle}
    </h1>
    <h2 class="mt-3" set:html={subtitle}></h2>

    <!-- Hero Buttons -->
    <ul class="flex justify-center list-none mt-14">
      <li class="block md:inline-block w-full text-center md:w-auto">
        <a
          href={button.url}
          class="rv-button rv-button-primary block md:inline-block"
        >
          <div class="rv-button-top">
            <span>{button.text}</span>
          </div>
          <div class="rv-button-bottom">
            <span class="text-nowrap">{button.text}</span>
          </div>
        </a>
      </li>
    </ul>
  </div>
</section>