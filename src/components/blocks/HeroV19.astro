---
// src/components/blocks/HeroV19.astro - Payload CMS Compatible (Startup/Brand Strategy)

export interface Props {
  heading: {
    headingPart1: string;
    headingPart2: string;
    italicHeading: string;
  };
  description: string;
  button: {
    text: string;
    url: string;
  };
  images: {
    image1: {
      url: string;
      alt?: string;
    };
    image2: {
      url: string;
      alt?: string;
    };
  };
  circleElement: {
    circleLogoLight: {
      url: string;
      alt?: string;
    };
    circleLogoDark: {
      url: string;
      alt?: string;
    };
    circleText: string;
  };
  gradientBackground: {
    url: string;
    alt?: string;
  };
}

const {
  heading,
  description,
  button,
  images,
  circleElement,
  gradientBackground,
} = Astro.props;

// Helper function to ensure proper image URLs
const getImageUrl = (imageObj: { url: string; alt?: string }) => {
  return imageObj?.url?.startsWith('http') 
    ? imageObj.url 
    : `http://localhost:3000${imageObj?.url || ''}`;
};

// Prepare image URLs
const image1Url = getImageUrl(images.image1);
const image2Url = getImageUrl(images.image2);
const circleLogoLightUrl = getImageUrl(circleElement.circleLogoLight);
const circleLogoDarkUrl = getImageUrl(circleElement.circleLogoDark);
const gradientBackgroundUrl = getImageUrl(gradientBackground);
---

<section
  class="relative pt-[137px] md:pt-[160px] xl:pt-[180px] overflow-hidden"
>
  <!-- Gradient Background Wrapper -->
  <div
    id="hero-gradient-wrapper"
    class="absolute top-0 md:-top-[10%] left-0 lg:-left-[17%] 2xl:left-0 -z-10 blur-[65px]"
  >
    <img
      src={gradientBackgroundUrl}
      alt={gradientBackground?.alt || "hero gradient background"}
      id="hero-gradient"
      class="scale-50 left-0 -top-[10%]"
      loading="lazy"
    />
  </div>
  <div
    class="max-w-[1600px] mx-auto px-4 md:px-[30px] flex flex-col gap-y-10 gap-x-5 lg:flex-row justify-between"
  >
    <!-- Content -->
    <div class="md:flex-1">
      <h1
        class="reveal-me text-5xl sm:text-[55px] md:text-[67px] 2xl:text-8xl font-normal leading-tight 2xl:leading-[1.17] tracking-[-2px] 2xl:tracking-[-2.88px]"
      >
        {heading.headingPart1} <br class="hidden lg:block" />
        {heading.headingPart2} <br class="hidden lg:block" />
        &<i class="font-instrument">{heading.italicHeading}</i>
      </h1>
      <p class="reveal-me mt-3" set:html={description}></p>

      <!-- Hero Buttons -->
      <ul class="mt-7 md:mt-9 lg:mt-14 cursor-pointer reveal-me-2">
        <li>
          <a
            href={button.url}
            class="rv-button rv-button-primary rv-button-sm block md:inline-block"
          >
            <div class="rv-button-top text-center">
              <span>{button.text}</span>
            </div>
            <div class="rv-button-bottom text-center">
              <span class="text-nowrap">{button.text}</span>
            </div>
          </a>
        </li>
      </ul>
    </div>

    <!-- Images -->
    <div class="md:flex-1 flex flex-col sm:flex-row gap-5">
      <figure class="mt-[78px] relative">
        <!-- logo -->
        <div
          class="absolute w-[120px] h-[120px] rounded-full flex items-center justify-center mx-auto before:absolute before:content-[''] before:w-[140px] before:h-[140px] before:rounded-full before:bg-white dark:before:bg-secondary -top-[12%] -left-0 lg:-left-[12%]"
        >
          <figure class="relative z-20">
            <img
              src={circleLogoLightUrl}
              alt={circleElement.circleLogoLight?.alt || "text circle logo"}
              class="inline dark:hidden"
              loading="lazy"
            />
            <img
              src={circleLogoDarkUrl}
              alt={circleElement.circleLogoDark?.alt || "text circle logo dark"}
              class="hidden dark:inline"
              loading="lazy"
            />
          </figure>
          <div
            class="text-2 text-[10px] bg-secondary dark:bg-backgroundBody !w-[120px] !h-[120px] rounded-full"
          >
            {circleElement.circleText}
          </div>
        </div>

        <img
          src={image1Url}
          alt={images.image1?.alt || "hero image 1"}
          class="max-sm:w-full"
          loading="lazy"
        />
      </figure>
      <figure>
        <img
          src={image2Url}
          alt={images.image2?.alt || "hero image 2"}
          class="max-sm:w-full"
          loading="lazy"
        />
      </figure>
    </div>
  </div>
</section>