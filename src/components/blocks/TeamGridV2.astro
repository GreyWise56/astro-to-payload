---
// src/components/blocks/TeamGridV2.astro

/*
================================================================================
Component: TeamGridV2
Description: A block that displays a section header and a grid of team members.
             It features two distinct, responsive layouts: an interactive
             expanding grid for desktop and a standard grid for mobile/tablet.
================================================================================
*/

import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';

// Define the properties for a single team member
export interface TeamMember {
  name: string;
  title: string;
  image: ImageMetadata;
  url: string;
}

// Define the properties for the entire block
export interface Props {
  heading: string;
  subheading: string;
  teamMembers: TeamMember[];
}

const { heading, subheading, teamMembers } = Astro.props;
---

<!--
================================================================================
The component contains both the desktop and mobile layouts, using Tailwind's
responsive prefixes (lg:, max-lg:) to control visibility.
================================================================================
-->
<section
  class="flex items-center justify-center pt-14 md:pt-16 lg:pt-[88px] xl:pt-[100px] pb-14 md:pb-16 lg:pb-[88px] xl:pb-[100px]"
>
  <div class="container w-full">
    <!-- Section Header -->
    <div
      class="flex flex-col md:flex-row gap-x-10 gap-y-2 justify-center lg:justify-between items-start md:items-center mb-20"
    >
      <div class="md:flex-1">
        <h2 class="text-appear block md:hidden" set:html={heading}></h2>
        <h2 class="text-appear text-nowrap hidden md:block" set:html={heading}></h2>
      </div>
      <div class="md:self-end flex-1">
        <p class="text-appear">
          {subheading}
        </p>
      </div>
    </div>

    <!-- Desktop Layout (lg and above) -->
    <div class="max-lg:hidden lg:block">
      <div class="flex justify-center items-center space-x-4 h-96 overflow-hidden">
        {teamMembers.map(member => (
          <div class="group relative w-40 h-96 transition-all duration-500 ease-in-out hover:w-96 hover:h-full cursor-pointer">
            <Image src={member.image} alt={`Photo of ${member.name}`} class="w-full h-full object-cover shadow-lg transition-all duration-300 ease-in-out" />
            <div class="absolute bottom-0 left-0 right-0 py-7 px-5 opacity-0 -translate-y-40 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-500 bg-primary m-5">
              <a href={member.url}>
                <div class="project-title mb-1">
                  <h3 class="md:text-4xl md:leading-[1.2] md:tracking-[-1.08px] text-secondary dark:text-secondary">
                    {member.name}
                  </h3>
                </div>
              </a>
              <p class="text-lg font-light leading-5 text-black/70 dark:text-black/70">
                {member.title}
              </p>
            </div>
          </div>
        ))}
      </div>
    </div>

    <!-- Mobile/Tablet Layout (below lg) -->
    <div class="max-lg:block lg:hidden">
      <div class="relative grid grid-cols-1 sm:grid-cols-2 justify-center gap-10 items-center">
        {teamMembers.map(member => (
          <div class="relative reveal-me">
            <Image src={member.image} alt={`Photo of ${member.name}`} class="w-full h-full object-cover shadow-lg" />
            <div class="absolute bottom-0 left-0 right-0 py-4 px-4 m-5 bg-primary">
              <a href={member.url}>
                <div class="project-title mb-1">
                  <h3 class="lg:text-4xl lg:leading-[1.2] lg:tracking-[-1.08px] dark:text-secondary">
                    {member.name}
                  </h3>
                </div>
              </a>
              <p class="text-lg font-light leading-5 text-black/70 dark:text-black/70">
                {member.title}
              </p>
            </div>
          </div>
        ))}
      </div>
    </div>
  </div>
</section>
